SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL';

ALTER TABLE `LugarMedico`.`TB_USUARIO` DROP FOREIGN KEY `TB_USUARIO_CD_PESSOA` ;

ALTER TABLE `LugarMedico`.`TB_SESSAO` DROP FOREIGN KEY `TB_SESSAO_CD_PESSOA` , DROP FOREIGN KEY `TB_SESSAO_CD_BROWSER` , DROP FOREIGN KEY `TB_SESSAO_CD_DISPOSITIVO` ;

ALTER TABLE `LugarMedico`.`TB_PESSOA_FISICA` DROP FOREIGN KEY `TB_PESSOA_FISICA_CD_PESSOA` ;

ALTER TABLE `LugarMedico`.`TB_PESSOA_JURIDICA` DROP FOREIGN KEY `TB_PESSOA_JURIDICA_CD_PESSOA` ;

ALTER TABLE `LugarMedico`.`TB_CIRCULO` DROP FOREIGN KEY `TB_CIRCULO_CD_PESSOA` ;

ALTER TABLE `LugarMedico`.`TB_CIRCULO_PESSOA` DROP FOREIGN KEY `TB_CIRCULO_PESSOA_CD_CIRCULO` , DROP FOREIGN KEY `TB_CIRCULO_PESSOA_CD_PESSOA` ;

ALTER TABLE `LugarMedico`.`TB_COLEGA_CONVITE` DROP FOREIGN KEY `TB_COLEGA_CONVITE_CD_PESSOA` ;

ALTER TABLE `LugarMedico`.`TB_COMENTARIO` DROP FOREIGN KEY `TB_COMENTARIO_CD_PESSOA` , DROP FOREIGN KEY `TB_COMENTARIO_CD_COMENTARIO_PAI` , DROP FOREIGN KEY `TB_COMENTARIO_CD_PESSOA_ORIGINAL` ;

ALTER TABLE `LugarMedico`.`TB_COMENTARIO_ALBUM_OBJETO` DROP FOREIGN KEY `CD_COMENTARIOTB_COMENTARIO_ALBUM_OBJETO_` , DROP FOREIGN KEY `CD_COMENTARIOTB_COMENTARIO_ALBUM_OBJETO_CD_ALBUM_OBJETO` ;

ALTER TABLE `LugarMedico`.`TB_PESSOA_CONTATO` DROP FOREIGN KEY `TB_PESSOA_CONTATO_CD_PESSOA` ;

ALTER TABLE `LugarMedico`.`TB_PESSOA_ENDERECO` DROP FOREIGN KEY `TB_PESSOA_ENDERECO_CD_PESSOA` , DROP FOREIGN KEY `TB_PESSOA_ENDERECO_CD_LOGRADOURO` , DROP FOREIGN KEY `TB_PESSOA_ENDERECO_CD_UF` , DROP FOREIGN KEY `TB_PESSOA_ENDERECO_CD_CIDADE` , DROP FOREIGN KEY `TB_PESSOA_ENDERECO_CD_CEP` ;

ALTER TABLE `LugarMedico`.`TB_CIDADE` DROP FOREIGN KEY `TB_CIDADE_CD_UF` ;

ALTER TABLE `LugarMedico`.`TB_PUBLICACAO` DROP FOREIGN KEY `TB_PUBLICACAO_CD_PESSOA` ;

ALTER TABLE `LugarMedico`.`TB_PUBLICACAO_ANEXO` DROP FOREIGN KEY `TB_PUBLICACAO_ANEXO_CD_PUBLICACAO` , DROP FOREIGN KEY `TB_PUBLICACAO_ANEXO_CD_OBJETO` ;

ALTER TABLE `LugarMedico`.`TB_ALBUM_OBJETO` DROP FOREIGN KEY `TB_ALBUM_OBJETO_CD_OBJETO` , DROP FOREIGN KEY `TB_ALBUM_OBJETO_CD_ALBUM` ;

ALTER TABLE `LugarMedico`.`TB_COMENTARIO_PUBLICACAO` DROP FOREIGN KEY `TB_COMENTARIO_PUBLICACAO_CD_COMENTARIO` , DROP FOREIGN KEY `TB_COMENTARIO_PUBLICACAO_CD_PUBLICACAO` ;

ALTER TABLE `LugarMedico`.`TB_COLEGA` DROP FOREIGN KEY `TB_COLEGA_CD_PESSOA` , DROP FOREIGN KEY `TB_COLEGA_CD_PESSOA_COLEGA` ;

ALTER TABLE `LugarMedico`.`TB_SALA` DROP FOREIGN KEY `FK_SALA_CD_PESSOA` , DROP FOREIGN KEY `FK_SALA_CD_ESPECIALIDADE` ;

ALTER TABLE `LugarMedico`.`TB_SALA_PESSOAS` DROP FOREIGN KEY `TB_SALA_PESSOAS_CD_PESSOA` , DROP FOREIGN KEY `TB_SALA_PESSOAS_CD_SALA` ;

ALTER TABLE `LugarMedico`.`TB_SALA_CONVITE` DROP FOREIGN KEY `TB_SALA_CONVITE_CD_SALA` , DROP FOREIGN KEY `TB_SALA_CONVITE_CD_PESSOA` ;

ALTER TABLE `LugarMedico`.`TB_OBJETO` DROP FOREIGN KEY `TB_OBJETO_CD_PESSOA` ;

ALTER TABLE `LugarMedico`.`TB_ALBUM` DROP FOREIGN KEY `TB_ALBUM_CD_PESSOA` ;

ALTER TABLE `LugarMedico`.`TB_PESSOA` ADD COLUMN `DS_CONSELHO` VARCHAR(20) NULL DEFAULT NULL COMMENT 'Número do conselho'  AFTER `NM_ULTIMO` , ADD COLUMN `DS_URL_PERFIL` VARCHAR(100) NULL DEFAULT NULL COMMENT 'Complemento da URL do Perfil público da pessoa'  AFTER `DS_CONSELHO` 
, ADD INDEX `TB_PESSOA_DS_EMAIL` (`DS_EMAIL` ASC) 
, ADD INDEX `TB_PESSOA_DS_NOME` (`NM_PESSOA` ASC) 
, ADD INDEX `TB_PESSOA_DS_URL_PERFIL` (`DS_URL_PERFIL` ASC) 
, DROP INDEX `DS_NOME` 
, DROP INDEX `DS_EMAIL` ;

ALTER TABLE `LugarMedico`.`TB_USUARIO` 
  ADD CONSTRAINT `TB_USUARIO_CD_PESSOA`
  FOREIGN KEY (`CD_PESSOA` )
  REFERENCES `LugarMedico`.`TB_PESSOA` (`CD_PESSOA` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION
, DROP INDEX `DS_LOGIN` 
, ADD INDEX `DS_LOGIN` (`DS_LOGIN` ASC) ;

ALTER TABLE `LugarMedico`.`TB_SESSAO` 
  ADD CONSTRAINT `TB_SESSAO_CD_PESSOA`
  FOREIGN KEY (`CD_PESSOA` )
  REFERENCES `LugarMedico`.`TB_PESSOA` (`CD_PESSOA` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION, 
  ADD CONSTRAINT `TB_SESSAO_CD_BROWSER`
  FOREIGN KEY (`CD_BROWSER` )
  REFERENCES `LugarMedico`.`TB_BROWSER` (`CD_BROWSER` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION, 
  ADD CONSTRAINT `TB_SESSAO_CD_DISPOSITIVO`
  FOREIGN KEY (`CD_DISPOSITIVO` )
  REFERENCES `LugarMedico`.`TB_DISPOSITIVO` (`CD_DISPOSITIVO` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

ALTER TABLE `LugarMedico`.`TB_PESSOA_FISICA` 
  ADD CONSTRAINT `TB_PESSOA_FISICA_CD_PESSOA`
  FOREIGN KEY (`CD_PESSOA` )
  REFERENCES `LugarMedico`.`TB_PESSOA` (`CD_PESSOA` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

ALTER TABLE `LugarMedico`.`TB_PESSOA_JURIDICA` 
  ADD CONSTRAINT `TB_PESSOA_JURIDICA_CD_PESSOA`
  FOREIGN KEY (`CD_PESSOA` )
  REFERENCES `LugarMedico`.`TB_PESSOA` (`CD_PESSOA` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

ALTER TABLE `LugarMedico`.`TB_CIRCULO` 
  ADD CONSTRAINT `TB_CIRCULO_CD_PESSOA`
  FOREIGN KEY (`CD_PESSOA` )
  REFERENCES `LugarMedico`.`TB_PESSOA` (`CD_PESSOA` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

ALTER TABLE `LugarMedico`.`TB_CIRCULO_PESSOA` 
  ADD CONSTRAINT `TB_CIRCULO_PESSOA_CD_CIRCULO`
  FOREIGN KEY (`CD_CIRCULO` )
  REFERENCES `LugarMedico`.`TB_CIRCULO` (`CD_CIRCULO` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION, 
  ADD CONSTRAINT `TB_CIRCULO_PESSOA_CD_PESSOA`
  FOREIGN KEY (`CD_PESSOA` )
  REFERENCES `LugarMedico`.`TB_PESSOA` (`CD_PESSOA` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

ALTER TABLE `LugarMedico`.`TB_COLEGA_CONVITE` 
  ADD CONSTRAINT `TB_COLEGA_CONVITE_CD_PESSOA`
  FOREIGN KEY (`CD_PESSOA` )
  REFERENCES `LugarMedico`.`TB_PESSOA` (`CD_PESSOA` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

ALTER TABLE `LugarMedico`.`TB_COMENTARIO` 
  ADD CONSTRAINT `TB_COMENTARIO_CD_PESSOA`
  FOREIGN KEY (`CD_PESSOA` )
  REFERENCES `LugarMedico`.`TB_PESSOA` (`CD_PESSOA` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION, 
  ADD CONSTRAINT `TB_COMENTARIO_CD_COMENTARIO_PAI`
  FOREIGN KEY (`CD_COMENTARIO_PAI` )
  REFERENCES `LugarMedico`.`TB_COMENTARIO` (`CD_COMENTARIO` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION, 
  ADD CONSTRAINT `TB_COMENTARIO_CD_PESSOA_ORIGINAL`
  FOREIGN KEY (`CD_PESSOA_ORIGINAL` )
  REFERENCES `LugarMedico`.`TB_PESSOA` (`CD_PESSOA` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

ALTER TABLE `LugarMedico`.`TB_COMENTARIO_ALBUM_OBJETO` 
  ADD CONSTRAINT `CD_COMENTARIOTB_COMENTARIO_ALBUM_OBJETO_`
  FOREIGN KEY (`CD_COMENTARIO` )
  REFERENCES `LugarMedico`.`TB_COMENTARIO` (`CD_COMENTARIO` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION, 
  ADD CONSTRAINT `CD_COMENTARIOTB_COMENTARIO_ALBUM_OBJETO_CD_ALBUM_OBJETO`
  FOREIGN KEY (`CD_ALBUM_OBJETO` )
  REFERENCES `LugarMedico`.`TB_ALBUM_OBJETO` (`CD_ALBUM_OBJETO` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

ALTER TABLE `LugarMedico`.`TB_PESSOA_CONTATO` 
  ADD CONSTRAINT `TB_PESSOA_CONTATO_CD_PESSOA`
  FOREIGN KEY (`CD_PESSOA` )
  REFERENCES `LugarMedico`.`TB_PESSOA` (`CD_PESSOA` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

ALTER TABLE `LugarMedico`.`TB_PESSOA_ENDERECO` 
  ADD CONSTRAINT `TB_PESSOA_ENDERECO_CD_PESSOA`
  FOREIGN KEY (`CD_PESSOA` )
  REFERENCES `LugarMedico`.`TB_PESSOA` (`CD_PESSOA` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION, 
  ADD CONSTRAINT `TB_PESSOA_ENDERECO_CD_LOGRADOURO`
  FOREIGN KEY (`CD_LOGRADOURO` )
  REFERENCES `LugarMedico`.`TB_LOGRADOURO` (`CD_LOGRADOURO` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION, 
  ADD CONSTRAINT `TB_PESSOA_ENDERECO_CD_UF`
  FOREIGN KEY (`CD_UF` )
  REFERENCES `LugarMedico`.`TB_UF` (`CD_UF` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION, 
  ADD CONSTRAINT `TB_PESSOA_ENDERECO_CD_CIDADE`
  FOREIGN KEY (`CD_CIDADE` )
  REFERENCES `LugarMedico`.`TB_CIDADE` (`CD_CIDADE` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION, 
  ADD CONSTRAINT `TB_PESSOA_ENDERECO_CD_CEP`
  FOREIGN KEY (`CD_CEP` )
  REFERENCES `LugarMedico`.`TB_CEP` (`CD_CEP` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

ALTER TABLE `LugarMedico`.`TB_CIDADE` 
  ADD CONSTRAINT `TB_CIDADE_CD_UF`
  FOREIGN KEY (`CD_UF` )
  REFERENCES `LugarMedico`.`TB_UF` (`CD_UF` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

ALTER TABLE `LugarMedico`.`TB_UF` 
DROP INDEX `DS_SIGLA` 
, ADD INDEX `DS_SIGLA` (`DS_SIGLA` ASC) ;

ALTER TABLE `LugarMedico`.`TB_PUBLICACAO` 
  ADD CONSTRAINT `TB_PUBLICACAO_CD_PESSOA`
  FOREIGN KEY (`CD_PESSOA` )
  REFERENCES `LugarMedico`.`TB_PESSOA` (`CD_PESSOA` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION
, DROP INDEX `NM_PUBLICACAO` 
, ADD INDEX `NM_PUBLICACAO` (`NM_PUBLICACAO` ASC) ;

ALTER TABLE `LugarMedico`.`TB_PUBLICACAO_ANEXO` 
  ADD CONSTRAINT `TB_PUBLICACAO_ANEXO_CD_PUBLICACAO`
  FOREIGN KEY (`CD_PUBLICACAO` )
  REFERENCES `LugarMedico`.`TB_PUBLICACAO` (`CD_PUBLICACAO` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION, 
  ADD CONSTRAINT `TB_PUBLICACAO_ANEXO_CD_OBJETO`
  FOREIGN KEY (`CD_OBJETO` )
  REFERENCES `LugarMedico`.`TB_OBJETO` (`CD_OBJETO` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

ALTER TABLE `LugarMedico`.`TB_ALBUM_OBJETO` 
  ADD CONSTRAINT `TB_ALBUM_OBJETO_CD_OBJETO`
  FOREIGN KEY (`CD_OBJETO` )
  REFERENCES `LugarMedico`.`TB_OBJETO` (`CD_OBJETO` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION, 
  ADD CONSTRAINT `TB_ALBUM_OBJETO_CD_ALBUM`
  FOREIGN KEY (`CD_ALBUM` )
  REFERENCES `LugarMedico`.`TB_ALBUM` (`CD_ALBUM` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

ALTER TABLE `LugarMedico`.`TB_COMENTARIO_PUBLICACAO` 
  ADD CONSTRAINT `TB_COMENTARIO_PUBLICACAO_CD_COMENTARIO`
  FOREIGN KEY (`CD_COMENTARIO` )
  REFERENCES `LugarMedico`.`TB_COMENTARIO` (`CD_COMENTARIO` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION, 
  ADD CONSTRAINT `TB_COMENTARIO_PUBLICACAO_CD_PUBLICACAO`
  FOREIGN KEY (`CD_PUBLICACAO` )
  REFERENCES `LugarMedico`.`TB_PUBLICACAO` (`CD_PUBLICACAO` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

ALTER TABLE `LugarMedico`.`TB_COLEGA` 
  ADD CONSTRAINT `TB_COLEGA_CD_PESSOA`
  FOREIGN KEY (`CD_PESSOA` )
  REFERENCES `LugarMedico`.`TB_PESSOA` (`CD_PESSOA` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION, 
  ADD CONSTRAINT `TB_COLEGA_CD_PESSOA_COLEGA`
  FOREIGN KEY (`CD_PESSOA_COLEGA` )
  REFERENCES `LugarMedico`.`TB_PESSOA` (`CD_PESSOA` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

ALTER TABLE `LugarMedico`.`TB_SALA` 
  ADD CONSTRAINT `FK_SALA_CD_PESSOA`
  FOREIGN KEY (`CD_PESSOA` )
  REFERENCES `LugarMedico`.`TB_PESSOA` (`CD_PESSOA` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION, 
  ADD CONSTRAINT `FK_SALA_CD_ESPECIALIDADE`
  FOREIGN KEY (`CD_ESPECIALIDADE` )
  REFERENCES `LugarMedico`.`TB_ESPECIALIDADE` (`CD_ESPECIALIDADE` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION
, DROP INDEX `IX_SALA_DT_INCLUSAO` 
, ADD INDEX `IX_SALA_DT_INCLUSAO` (`DT_INCLUSAO` ASC) 
, DROP INDEX `IX_SALA_DT_INICIO` 
, ADD INDEX `IX_SALA_DT_INICIO` (`DT_INICIO` ASC) ;

ALTER TABLE `LugarMedico`.`TB_SALA_PESSOAS` 
  ADD CONSTRAINT `TB_SALA_PESSOAS_CD_PESSOA`
  FOREIGN KEY (`CD_PESSOA` )
  REFERENCES `LugarMedico`.`TB_PESSOA` (`CD_PESSOA` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION, 
  ADD CONSTRAINT `TB_SALA_PESSOAS_CD_SALA`
  FOREIGN KEY (`CD_SALA` )
  REFERENCES `LugarMedico`.`TB_SALA` (`CD_SALA` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

ALTER TABLE `LugarMedico`.`TB_SALA_CONVITE` 
  ADD CONSTRAINT `TB_SALA_CONVITE_CD_SALA`
  FOREIGN KEY (`CD_SALA` )
  REFERENCES `LugarMedico`.`TB_SALA` (`CD_SALA` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION, 
  ADD CONSTRAINT `TB_SALA_CONVITE_CD_PESSOA`
  FOREIGN KEY (`CD_PESSOA` )
  REFERENCES `LugarMedico`.`TB_PESSOA` (`CD_PESSOA` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

ALTER TABLE `LugarMedico`.`TB_OBJETO` 
  ADD CONSTRAINT `TB_OBJETO_CD_PESSOA`
  FOREIGN KEY (`CD_PESSOA` )
  REFERENCES `LugarMedico`.`TB_PESSOA` (`CD_PESSOA` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

ALTER TABLE `LugarMedico`.`TB_ALBUM` 
  ADD CONSTRAINT `TB_ALBUM_CD_PESSOA`
  FOREIGN KEY (`CD_PESSOA` )
  REFERENCES `LugarMedico`.`TB_PESSOA` (`CD_PESSOA` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

CREATE  TABLE IF NOT EXISTS `LugarMedico`.`TB_CONVITE` (
  `CD_CONVITE` INT(11) NOT NULL AUTO_INCREMENT ,
  `DS_EMAIL` VARCHAR(100) NOT NULL COMMENT 'E-mail do convidado' ,
  `NM_PESSOA` VARCHAR(50) NOT NULL COMMENT 'Nome do convidado' ,
  `NM_PRIMEIRO` VARCHAR(30) NOT NULL ,
  `NM_ULTIMO` VARCHAR(30) NULL DEFAULT NULL ,
  `DS_CONSELHO` VARCHAR(20) NULL DEFAULT NULL COMMENT 'Número do conselho' ,
  `DT_INCLUSAO` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ,
  `FL_ATIVO` TINYINT(4) NULL DEFAULT 1 COMMENT 'Flag de ativo\n0 - Destativado\nnull - Desativado\n1 - Ativo' ,
  `QT_VISUALIZACOES` TINYINT(4) NULL DEFAULT 0 COMMENT 'Quantidade de vezes que o convite foi visto' ,
  `FL_ACEITE` TINYINT(4) NULL DEFAULT NULL COMMENT 'Flag de aceite\nnull  - Não se pronunciou\n0 - Não aceitou\n1 - Aceitou\n' ,
  `DT_VISUALIZACAO` DATETIME NULL DEFAULT NULL COMMENT 'Data e hora que ele foi visualizado pela última vez' ,
  `DT_ACEITE` DATETIME NULL DEFAULT NULL COMMENT 'Data e hora do aceite' ,
  PRIMARY KEY (`CD_CONVITE`) ,
  INDEX `TB_CONVITE_DS_EMAIL` (`DS_EMAIL` ASC) )
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1
COLLATE = latin1_swedish_ci, 
COMMENT = 'Convites para participar do Lugar Médico' ;

CREATE  TABLE IF NOT EXISTS `LugarMedico`.`TB_CONVITE_PESSOA` (
  `CD_CONVITE_PESSOA` INT(11) NOT NULL AUTO_INCREMENT ,
  `CD_CONVITE` INT(11) NULL DEFAULT NULL ,
  `CD_PESSOA` INT(11) NULL DEFAULT NULL ,
  `FL_PRIMEIRO` TINYINT(4) NULL DEFAULT 0 COMMENT '0 - Não é o convite principal\n1 - Foi o 1o convite' ,
  `DT_INCLUSAO` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ,
  `FL_ATIVO` TINYINT(4) NULL DEFAULT 1 COMMENT 'Flag de ativo\n0 - Destativado\nnull - Desativado\n1 - Ativo' ,
  PRIMARY KEY (`CD_CONVITE_PESSOA`) ,
  INDEX `TB_CONVITE_PESSOA_CD_PESSOA` (`CD_PESSOA` ASC) ,
  INDEX `TB_CONVITE_PESSOA_CD_CONVITE` (`CD_CONVITE` ASC) ,
  CONSTRAINT `TB_CONVITE_PESSOA_CD_PESSOA`
    FOREIGN KEY (`CD_PESSOA` )
    REFERENCES `LugarMedico`.`TB_PESSOA` (`CD_PESSOA` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `TB_CONVITE_PESSOA_CD_CONVITE`
    FOREIGN KEY (`CD_CONVITE` )
    REFERENCES `LugarMedico`.`TB_CONVITE` (`CD_CONVITE` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1
COLLATE = latin1_swedish_ci, 
COMMENT = 'Convite de alguma pessoa para amigo externo' ;

CREATE  TABLE IF NOT EXISTS `LugarMedico`.`TB_CONVITE_copy1` (
  `CD_CONVITE` INT(11) NOT NULL AUTO_INCREMENT ,
  `DS_EMAIL` VARCHAR(100) NOT NULL COMMENT 'E-mail do convidado' ,
  `DS_NOME` VARCHAR(100) NOT NULL COMMENT 'Nome do convidado' ,
  `DT_INCLUSAO` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ,
  `FL_ATIVO` TINYINT(4) NULL DEFAULT 1 COMMENT 'Flag de ativo\n0 - Destativado\nnull - Desativado\n1 - Ativo' ,
  `QT_VISUALIZACOES` TINYINT(4) NULL DEFAULT 0 COMMENT 'Quantidade de vezes que o convite foi visto' ,
  `FL_ACEITE` TINYINT(4) NULL DEFAULT NULL COMMENT 'Flag de aceite\nnull  - Não se pronunciou\n0 - Não aceitou\n1 - Aceitou\n' ,
  `DT_VISUALIZACAO` DATETIME NULL DEFAULT NULL COMMENT 'Data e hora que ele foi visualizado pela última vez' ,
  `DT_ACEITE` DATETIME NULL DEFAULT NULL COMMENT 'Data e hora do aceite' ,
  `NM_ULTIMO` VARCHAR(30) NULL DEFAULT NULL ,
  `NM_PRIMEIRO` VARCHAR(45) NULL DEFAULT NULL ,
  PRIMARY KEY (`CD_CONVITE`) ,
  INDEX `TB_CONVITE_DS_EMAIL` (`DS_EMAIL` ASC) )
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1
COLLATE = latin1_swedish_ci, 
COMMENT = 'Convites para participar do Lugar Médico' ;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
